/*
 * Copyright (C) 2011 McGill University
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

/*
* BrainBrowser v1.3.8
* https://brainbrowser.cbrain.mcgill.ca/
*
* Author: Tarek Sherif  <tsherif@gmail.com> (http://tareksherif.ca/)
* Author: Nicolas Kassis
*/
BrainBrowser.SurfaceViewer.modules.ui=function(a){"use strict";a.addEffect("AnaglyphEffect"),$("body").keydown(function(b){var c=b.which,d={38:function(){a.zoom(1.1)},40:function(){a.zoom(1/1.1)},32:function(){a.separateHalves()}};return c in d?(d[c](),!1):!0}),$("#clear_color").change(function(b){a.setClearColor(parseInt($(b.target).val(),16))}),$("#resetview").click(function(){a.setView($("[name=hem_view]:checked").val())}),$(".visibility").change(function(){var b=$(this),c=b.data("hemisphere"),d=a.model.getObjectByName(c);d&&(d.wireframe_active&&(d=d.getObjectByName("__wireframe__")||d),d.visible=b.is(":checked"))}),$("[name=hem_view]").change(function(){a.setView($("[name=hem_view]:checked").val())}),$("#meshmode").change(function(){a.setWireframe($(this).is(":checked"))}),$("#threedee").change(function(){a.setEffect($(this).is(":checked")?"AnaglyphEffect":"None")}),$("#openImage").click(function(){function b(){var a=new Image;a.onload=function(){$("<div></div>").append(a).dialog({title:"Screenshot",height:a.height,width:a.width})},a.src=e.toDataURL()}function c(){var a=new Image;a.onload=function(){g.drawImage(a,0,0),b()},a.src=f.toDataURL()}var d=a.view_window,e=document.createElement("canvas"),f=document.getElementById("spectrum-canvas"),g=e.getContext("2d"),h=new Image;e.width=d.offsetWidth,e.height=d.offsetHeight,h.onload=function(){g.drawImage(h,0,0),$(f).is(":visible")?c():b()},h.src=a.canvasDataURL()}),$("#autorotate-controls").children().change(function(){a.autoRotate.x=$("#autorotateX").is(":checked"),a.autoRotate.y=$("#autorotateY").is(":checked"),a.autoRotate.z=$("#autorotateZ").is(":checked")})};